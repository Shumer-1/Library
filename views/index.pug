extends layout

block content
    h1 Список книг

    form(id="filterForm", style="margin-bottom: 20px;" method="get")
        label(for="available") Только доступные:
        input(type="checkbox" id="available" name="available" value="true" checked=available)

        label(for="overdue") Просроченные:
        input(type="checkbox" id="overdue" name="overdue" value="true" checked=overdue)

        button(type="submit" style="background-color: black; color: white; font-size: 16px; padding: 5px 10px; border: none; cursor: pointer;") Применить фильтр

    if books.length > 0
        // Контейнер для таблицы с прокруткой
        div(style="overflow-y: auto; max-height: 400px; margin-left: 0; max-width: 1000px")
            table(style="color: black; width: 100%; border-collapse: collapse;")
                thead
                    tr
                        th(style="background-color: black; color: white;") Название книги
                        th(style="background-color: black; color: white;") Автор
                        th(style="background-color: black; color: white;") Статус
                        th(style="background-color: black; color: white;") Дата возврата
                        th(style="background-color: black; color: white;")
                tbody
                    each book in books
                        tr
                            td(style="background-color: black; color: white;")
                                form(action=`/book/${book.id}` method="get")
                                    button(type="submit" class="book-button" style="color: white; font-size: 18px;") #{book.title}
                            td(style="background-color: black; color: white;") #{book.author}
                            td(style="background-color: black; color: white;")
                                if book.available
                                    span В наличии
                                else
                                    span Выдано
                            td(style="background-color: black; color: white;")
                                if !book.available
                                    span #{book.returnDate}
                                else
                                    span -
                            td(style="background-color: black; color: white;")
                                form(action=`/book/${book.id}/delete` method="post" style="display: inline-block; margin-left: 10px;")
                                    button(type="submit" class="delete-button" style="background-color: black; color: white; font-size: 14px; padding: 5px 10px; border: none; cursor: pointer;" onclick="return confirmDeletion()") Удалить

    else
        p Нет книг для отображения

    a(href="/book/new" class="add-book-button") Добавить новую книгу

    script.
        function confirmDeletion() {
            return confirm("Вы уверены, что хотите удалить эту книгу?");
        }
